<!DOCTYPE html><html><head><link rel="preload" href="https://unpkg.com/prismjs@0.0.1/themes/prism.css" as="style"/><link rel="preload" href="https://unpkg.com/prismjs@0.0.1/themes/prism-tomorrow.css" as="style"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="theme-color" content="#90cdf4"/><meta name="apple-mobile-web-app-status-bar" content="#90cdf4"/><link rel="icon" href="/favicon.ico"/><link rel="manifest" href="/manifest.json"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><title>Music Player One</title><link href="https://unpkg.com/prismjs@0.0.1/themes/prism.css" rel="stylesheet"/><meta name="next-head-count" content="11"/><link rel="preload" href="/_next/static/css/23ecf6b904bbc1eb16bc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/23ecf6b904bbc1eb16bc.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-f57b31e598cb16fb6009.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js" as="script"/><link rel="preload" href="/_next/static/chunks/3ef630e34cd10ba68f9d468ac363ff81c534e1e9.cf3b1de768144c1af8b9.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-f39666070c49f80af782.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bid%5D-871c4cf3b28405056fcf.js" as="script"/></head><body><div id="__next"><nav class="nav"><div><a href="#">Home</a></div><div><a href="#">About</a></div><div><a href="#">Hom</a></div></nav><div id="post"><h1 align="center">Music Player One</h1>
<div align="center" >
  <a href="https://music-player-1.herokuapp.com/">
  Live Site
  </a>
</div>
<br/>
<h3 align="center">
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Jump to time & skip song &nbsp; | &nbsp; Song search -> preview -> add
</h3>
<br/>
<div style="display: flex; justify-content: center; align-item: center">
  <figure>
    <img width="270" height="auto" src="https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/scrub-skip.gif" />
    <figcaption> 
      Jump to time & skip song
    </figcaption>
  </figure>
  <figure>
    <img width="270" height="auto" src="https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/search-flow.gif" />
    <figcaption> Song search -> preview -> add </figcaption>
  </figure>
</div>
<div style="display: flex; justify-content: center; align-item: center">
  <figure>
    <img width="270" height="auto" src="https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/drag-reorder-track.gif" />
    <figcaption> 
      Drag number to reorder playlist
    </figcaption>
  </figure>
  <figure>
    <img width="270" height="auto" src="https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/media-control.gif" />
    <figcaption> Media control on lock screen </figcaption>
  </figure>
</div>
<div style="display: flex; justify-content: center; align-item: center">
  <figure>
    <img width="270" height="auto" src="https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/edit-song-info.gif" />
    <figcaption> 
      Edit song information
    </figcaption>
  </figure>
  <figure>
    <img width="270" height="auto" src="https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/darkmode-toggle.gif" />
    <figcaption> Dark / Light mode toggle </figcaption>
  </figure>
</div>
<h3 align="center">
Desktop interface (responsive layout)
</h3>
<br/>
<p align="center">
  <img width="600" height="auto" src="https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/desktop-adaptive.gif"></img>
</p>
<br/>
<h2>About</h2>
<p>A mobile friendly music streaming web app using S3 storage. For a demo, please check out the <a href="https://music-player-1.herokuapp.com/">live site</a>.</p>
<h2>Core features</h2>
<ul>
<li>Full playlist functionality</li>
<li>Adding songs
<ul>
<li>User can also search for songs using search bar</li>
<li>For each search, a playlist of the search results is dynamically generated, allowing the user to preview tracks before adding them</li>
<li>Upload local files, multi-file batch uploads are supported</li>
</ul>
</li>
<li>Editable song metadata and automated album art fetching
<ul>
<li>Title, artist, album, and album art URL</li>
<li>Once the song title and artist fields are populated, the app will attempt to fetch the album art based on aforementioned info</li>
</ul>
</li>
<li>Optimized UI for touch and mobile
<ul>
<li>Swipe touch gestures to reorder tracks and skip songs</li>
<li>Integrated media controls allows the user to controll playback from desktop keyboard or Bluetooth device</li>
</ul>
</li>
<li>Dark/Light mode toggle</li>
</ul>
<h2>Implementation</h2>
<h3>Playlists</h3>
<ul>
<li>Backend (<a href="https://www.djangoproject.com/">Django</a> | <a href="https://www.postgresql.org/">Postgresql</a>):
<ul>
<li>Each occurence of a song in a playlist is stored as a row in the <code>Entry</code> table (join table between <code>Song</code> and <code>Playlist</code> tables) with the columns: <code>entry_id</code>, <code>playlist_id</code>, <code>song_id</code>, <code>order</code>.</li>
<li>The <code>order</code> column is an integer field representing the order of the track in the playlist, with <code>1</code> denoting the first track.</li>
</ul>
</li>
<li>Frontend (<a href="https://reactjs.org/">React</a> | <a href="https://redux.js.org/">Redux</a>):
<ul>
<li>In Redux, a playlist is stored as an array of ordered pairs with the schema: <code>song_id</code>, <code>entry_id</code>.</li>
<li>The index of the array corresponds to the "<code>order</code> value minus 1" in the backend <code>Entry</code> table.</li>
</ul>
</li>
<li>To improve load time, playlists are fetched "lazily"
<ul>
<li>Only the <strong>songs</strong> and <strong>playlist titles</strong> are fetched when the user first logs in</li>
<li>Subsequently, each playlist is fetched separately only when the user requests it</li>
</ul>
</li>
<li>Whenever a track is moved, added, or removed, the playlist's order column must be updated. Fortunately, Django's <a href="https://docs.djangoproject.com/en/3.1/ref/models/expressions/#f-expressions">F() expressions</a> and <a href="https://docs.djangoproject.com/en/3.1/ref/models/querysets/#bulk-update">bulk_update()</a> method allows for the batch update of rows in one or two SQL queries.</li>
<li>When a song is deleted in the database, all the (potentially many) playlists that contain the songs need to be updated in Redux. Along the lines of lazy playlist fetching, only two updated playlists are fetched from the database upon deletion -- the one that is currently playing, and the one that is being viewed. All other "dirty" playlists are wiped from the Redux store. These wiped playlists only fetched fresh again when the user requests it later on.</li>
</ul>
<h3>Song upload</h3>
<ul>
<li>Songs are stored in AWS <a href="https://aws.amazon.com/s3/">S3</a> buckets</li>
<li>Utilizing javascripts async methods, the user is able to upload multiple files at once</li>
<li>A Node.js <a href="https://aws.amazon.com/lambda/">Lambda</a> function handles the song search, preview, and add functionality.</li>
</ul>
<h3>Automated album art fetching</h3>
<ul>
<li>Once a the song titles and artist fields are filled in, the app will attempt to look for the song <a href="https://musicbrainz.org/">MusicBrainz</a> database.</li>
<li>If a match is found, the app uses the returned id from the match and queries the <a href="http://coverartarchive.org/">Cover Art Archive</a>, which will return a link to the song's album art.</li>
<li>The user can specify custom album art by providing the an image url. This is useful on the few occasions when the app fetches the wrong album art, or when the album art is not available.</li>
</ul>
<h3>Misc</h3>
<ul>
<li>Drag and drop of the playlist elements is implemented using <a href="https://react-dnd.github.io/react-dnd/about">React DND</a> module.</li>
<li>The app uses the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Media_Session_API">Media Session API</a> to allow the user to control playback using hardware button, or button on the phone lockscreen / notification tray.</li>
</ul>
<h3>Features to add</h3>
<ul>
<li>Batch addition and deletion of tracks to playlist</li>
<li>Batch editing of song metadata</li>
</ul>
</div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"music","contentHtml":"\u003ch1 align=\"center\"\u003eMusic Player One\u003c/h1\u003e\n\u003cdiv align=\"center\" \u003e\n  \u003ca href=\"https://music-player-1.herokuapp.com/\"\u003e\n  Live Site\n  \u003c/a\u003e\n\u003c/div\u003e\n\u003cbr/\u003e\n\u003ch3 align=\"center\"\u003e\n  \u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Jump to time \u0026 skip song \u0026nbsp; | \u0026nbsp; Song search -\u003e preview -\u003e add\n\u003c/h3\u003e\n\u003cbr/\u003e\n\u003cdiv style=\"display: flex; justify-content: center; align-item: center\"\u003e\n  \u003cfigure\u003e\n    \u003cimg width=\"270\" height=\"auto\" src=\"https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/scrub-skip.gif\" /\u003e\n    \u003cfigcaption\u003e \n      Jump to time \u0026 skip song\n    \u003c/figcaption\u003e\n  \u003c/figure\u003e\n  \u003cfigure\u003e\n    \u003cimg width=\"270\" height=\"auto\" src=\"https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/search-flow.gif\" /\u003e\n    \u003cfigcaption\u003e Song search -\u003e preview -\u003e add \u003c/figcaption\u003e\n  \u003c/figure\u003e\n\u003c/div\u003e\n\u003cdiv style=\"display: flex; justify-content: center; align-item: center\"\u003e\n  \u003cfigure\u003e\n    \u003cimg width=\"270\" height=\"auto\" src=\"https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/drag-reorder-track.gif\" /\u003e\n    \u003cfigcaption\u003e \n      Drag number to reorder playlist\n    \u003c/figcaption\u003e\n  \u003c/figure\u003e\n  \u003cfigure\u003e\n    \u003cimg width=\"270\" height=\"auto\" src=\"https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/media-control.gif\" /\u003e\n    \u003cfigcaption\u003e Media control on lock screen \u003c/figcaption\u003e\n  \u003c/figure\u003e\n\u003c/div\u003e\n\u003cdiv style=\"display: flex; justify-content: center; align-item: center\"\u003e\n  \u003cfigure\u003e\n    \u003cimg width=\"270\" height=\"auto\" src=\"https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/edit-song-info.gif\" /\u003e\n    \u003cfigcaption\u003e \n      Edit song information\n    \u003c/figcaption\u003e\n  \u003c/figure\u003e\n  \u003cfigure\u003e\n    \u003cimg width=\"270\" height=\"auto\" src=\"https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/darkmode-toggle.gif\" /\u003e\n    \u003cfigcaption\u003e Dark / Light mode toggle \u003c/figcaption\u003e\n  \u003c/figure\u003e\n\u003c/div\u003e\n\u003ch3 align=\"center\"\u003e\nDesktop interface (responsive layout)\n\u003c/h3\u003e\n\u003cbr/\u003e\n\u003cp align=\"center\"\u003e\n  \u003cimg width=\"600\" height=\"auto\" src=\"https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/desktop-adaptive.gif\"\u003e\u003c/img\u003e\n\u003c/p\u003e\n\u003cbr/\u003e\n\u003ch2\u003eAbout\u003c/h2\u003e\n\u003cp\u003eA mobile friendly music streaming web app using S3 storage. For a demo, please check out the \u003ca href=\"https://music-player-1.herokuapp.com/\"\u003elive site\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003eCore features\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eFull playlist functionality\u003c/li\u003e\n\u003cli\u003eAdding songs\n\u003cul\u003e\n\u003cli\u003eUser can also search for songs using search bar\u003c/li\u003e\n\u003cli\u003eFor each search, a playlist of the search results is dynamically generated, allowing the user to preview tracks before adding them\u003c/li\u003e\n\u003cli\u003eUpload local files, multi-file batch uploads are supported\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eEditable song metadata and automated album art fetching\n\u003cul\u003e\n\u003cli\u003eTitle, artist, album, and album art URL\u003c/li\u003e\n\u003cli\u003eOnce the song title and artist fields are populated, the app will attempt to fetch the album art based on aforementioned info\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eOptimized UI for touch and mobile\n\u003cul\u003e\n\u003cli\u003eSwipe touch gestures to reorder tracks and skip songs\u003c/li\u003e\n\u003cli\u003eIntegrated media controls allows the user to controll playback from desktop keyboard or Bluetooth device\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eDark/Light mode toggle\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eImplementation\u003c/h2\u003e\n\u003ch3\u003ePlaylists\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eBackend (\u003ca href=\"https://www.djangoproject.com/\"\u003eDjango\u003c/a\u003e | \u003ca href=\"https://www.postgresql.org/\"\u003ePostgresql\u003c/a\u003e):\n\u003cul\u003e\n\u003cli\u003eEach occurence of a song in a playlist is stored as a row in the \u003ccode\u003eEntry\u003c/code\u003e table (join table between \u003ccode\u003eSong\u003c/code\u003e and \u003ccode\u003ePlaylist\u003c/code\u003e tables) with the columns: \u003ccode\u003eentry_id\u003c/code\u003e, \u003ccode\u003eplaylist_id\u003c/code\u003e, \u003ccode\u003esong_id\u003c/code\u003e, \u003ccode\u003eorder\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eThe \u003ccode\u003eorder\u003c/code\u003e column is an integer field representing the order of the track in the playlist, with \u003ccode\u003e1\u003c/code\u003e denoting the first track.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eFrontend (\u003ca href=\"https://reactjs.org/\"\u003eReact\u003c/a\u003e | \u003ca href=\"https://redux.js.org/\"\u003eRedux\u003c/a\u003e):\n\u003cul\u003e\n\u003cli\u003eIn Redux, a playlist is stored as an array of ordered pairs with the schema: \u003ccode\u003esong_id\u003c/code\u003e, \u003ccode\u003eentry_id\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eThe index of the array corresponds to the \"\u003ccode\u003eorder\u003c/code\u003e value minus 1\" in the backend \u003ccode\u003eEntry\u003c/code\u003e table.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eTo improve load time, playlists are fetched \"lazily\"\n\u003cul\u003e\n\u003cli\u003eOnly the \u003cstrong\u003esongs\u003c/strong\u003e and \u003cstrong\u003eplaylist titles\u003c/strong\u003e are fetched when the user first logs in\u003c/li\u003e\n\u003cli\u003eSubsequently, each playlist is fetched separately only when the user requests it\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eWhenever a track is moved, added, or removed, the playlist's order column must be updated. Fortunately, Django's \u003ca href=\"https://docs.djangoproject.com/en/3.1/ref/models/expressions/#f-expressions\"\u003eF() expressions\u003c/a\u003e and \u003ca href=\"https://docs.djangoproject.com/en/3.1/ref/models/querysets/#bulk-update\"\u003ebulk_update()\u003c/a\u003e method allows for the batch update of rows in one or two SQL queries.\u003c/li\u003e\n\u003cli\u003eWhen a song is deleted in the database, all the (potentially many) playlists that contain the songs need to be updated in Redux. Along the lines of lazy playlist fetching, only two updated playlists are fetched from the database upon deletion -- the one that is currently playing, and the one that is being viewed. All other \"dirty\" playlists are wiped from the Redux store. These wiped playlists only fetched fresh again when the user requests it later on.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eSong upload\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eSongs are stored in AWS \u003ca href=\"https://aws.amazon.com/s3/\"\u003eS3\u003c/a\u003e buckets\u003c/li\u003e\n\u003cli\u003eUtilizing javascripts async methods, the user is able to upload multiple files at once\u003c/li\u003e\n\u003cli\u003eA Node.js \u003ca href=\"https://aws.amazon.com/lambda/\"\u003eLambda\u003c/a\u003e function handles the song search, preview, and add functionality.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAutomated album art fetching\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eOnce a the song titles and artist fields are filled in, the app will attempt to look for the song \u003ca href=\"https://musicbrainz.org/\"\u003eMusicBrainz\u003c/a\u003e database.\u003c/li\u003e\n\u003cli\u003eIf a match is found, the app uses the returned id from the match and queries the \u003ca href=\"http://coverartarchive.org/\"\u003eCover Art Archive\u003c/a\u003e, which will return a link to the song's album art.\u003c/li\u003e\n\u003cli\u003eThe user can specify custom album art by providing the an image url. This is useful on the few occasions when the app fetches the wrong album art, or when the album art is not available.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eMisc\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDrag and drop of the playlist elements is implemented using \u003ca href=\"https://react-dnd.github.io/react-dnd/about\"\u003eReact DND\u003c/a\u003e module.\u003c/li\u003e\n\u003cli\u003eThe app uses the \u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/API/Media_Session_API\"\u003eMedia Session API\u003c/a\u003e to allow the user to control playback using hardware button, or button on the phone lockscreen / notification tray.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eFeatures to add\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eBatch addition and deletion of tracks to playlist\u003c/li\u003e\n\u003cli\u003eBatch editing of song metadata\u003c/li\u003e\n\u003c/ul\u003e\n","title":"Music Player One","date":"2020-01-01","blurb":"A mobile friendly music streaming app using React and PostgreSQL. Has playlist capability.","preview":"https://raw.githubusercontent.com/twpride/music-player-1/main/assets/demo/desktop-adaptive.gif","bgColor":null,"tags":["portfolio","music"]}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"music"},"buildId":"scTGYpR6dOElbA7New4aW","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-4f14e8c8ea1352d3ef0d.js"></script><script src="/_next/static/chunks/main-f57b31e598cb16fb6009.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.abffcf18e526b7c0dbcd.js" async=""></script><script src="/_next/static/chunks/3ef630e34cd10ba68f9d468ac363ff81c534e1e9.cf3b1de768144c1af8b9.js" async=""></script><script src="/_next/static/chunks/pages/_app-f39666070c49f80af782.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-871c4cf3b28405056fcf.js" async=""></script><script src="/_next/static/scTGYpR6dOElbA7New4aW/_buildManifest.js" async=""></script><script src="/_next/static/scTGYpR6dOElbA7New4aW/_ssgManifest.js" async=""></script></body></html>